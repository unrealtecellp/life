<!-- <!DOCTYPE html>
<html>

<head>

  <title>Karya Extension</title>
  
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" />
  <script src="https://cdn.datatables.net/1.10.12/js/jquery.dataTables.min.js"></script>
  <script src="https://cdn.datatables.net/1.10.12/js/dataTables.bootstrap.min.js"></script>  
  <link rel="stylesheet" href="https://cdn.datatables.net/1.10.12/css/dataTables.bootstrap.min.css" />
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/x-editable/1.5.1/bootstrap3-editable/css/bootstrap-editable.css" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/x-editable/1.5.1/bootstrap3-editable/js/bootstrap-editable.js"></script>



  <style>
  
    h1 {text-align: center;}

    input[type=button]:hover {
      box-shadow: 0 12px 16px 0 rgba(0,0,0,0.24),0 17px 50px 0 rgba(0,0,0,0.19);
    }
    
    div {
      border-radius: 20px;
      background-color: rgba(247, 235, 220, 0.253);
      padding: 1px;
    }
    </style> -->
  
<!-- </head> -->
{% extends "karyaextlinks.html" %}

{% block title %}
  Karya Extension
{% endblock title %}

<!-- <body> -->




{% block styles %}
{{super()}}
  <link href="{{url_for('.static', filename='home_insert.css')}}" rel="stylesheet" />
{% endblock %}
  
{% block app_content %}
  {% if projectName is defined %}
    <h4>
        Project Name : {{ projectName }}
    </h4>
  {% endif %}

  <div>

    <div id="uploadmanage">
      <br>
      {% if  shareinfo['sharemode']|int >= 4 %}
        <input type="button" class="btn btn-lg btn-danger" value="Fetch/Upload Access Code" onclick="window.location.href='{{url_for('karya_bp.uploadfile')}}';">
      {% endif %}

      <br><br>
      {% if  shareinfo['sharemode']|int >= 2 %}
        <input class="btn btn-lg btn-success" type="button" value="Manage Access Code" onclick="window.location.href='{{url_for('karya_bp.homespeaker')}}'; window">
      {% endif %}
      <br>
      <hr>
    </div>
    
    <div class="row karyaaudiodata">
      {% if  shareinfo['sharemode']|int >= 3 %}
        <div class="col-md-6 fetchkaryarecording">
          <h3><b>Fetch Karya Recordings</b></h3>
          <form name="fetchdata" method="POST" action="{{url_for('karya_bp.fetch_karya_audio')}}">
            <!-- <label for="piaccesscode">Access Code: </label> -->
            <!-- <input type="text" name="access_code" id="piaccesscode" placeholder="Enter Access Code"/> -->
            <br>
            <style>
              .dropdown-container {
                  display: flex;
                  align-items: center;
              }
          
              .dropdown-container select {
                  width: 200px;
                  height: 30px; /* Adjust the height to your desired value */
                  padding: 5px;
                  border-radius: 5px;
                  margin-left: 10px;
                  background-color: #f1f1f1fb;
              }
          </style>
          <p>To Fetch Karya Recoding Select The Task To Get Access Code(s) : </p>
              <div class="dropdown-container">
                <h5 style="font-weight: bold; margin-right: 10px;">Task:</h5>
                <select id="optionSelect" name="optionSelect" onchange="showDropdown()">
                    <option value="">Select Access Code Task</option>
                    <option value="verificationAccessCode" style="text-align: center;">Verification</option>
                    <option value="transcriptionAccessCode" style="text-align: center;">Transcription</option>
                    <!-- <option value="verificationAccessCode"> Verification </option>
                    <option value="transcriptionAccessCode"> Transcription </option> -->
                </select>
            </div>
            
            <br>

            <div id="piveraccesscode" style="display: none;">
              <h3>Verification Access Code:</h3>
              <select name="verAccessCode" id="verAccessCodeSelect" >
                  <option value="">Select a verification access code</option>
                  <!-- Options will be populated dynamically -->
              </select>
          </div>
            
            <div id="pitransaccesscode" style="display: none;">
                <h3>Transcription Access Code:</h3>
                <select name="transAccessCode" id="transAccessCodeSelect" >
                    <option value="">Select a transcription access code</option>
                    <!-- Options will be populated dynamically -->
                </select>
            </div>
            
            


            <!-- <div id="piaccesscode"></div>
            <br>
            <div id="pitransaccesscode"></div>
            <br>
            <div id="piveraccesscode"></div> -->
            <br>
            <div id="idforworker"></div>
            <br>
            <!-- <label for="idfor_worker_id">For Speaker: </label>
            <input type="text" name = "for_worker_id" id="idfor_worker_id" placeholder="Enter Speaker ID"/ required>
            <br> -->
            <label for="pimobilenumber">Mobile Number: </label>
            <input type="text" name = "mobile_number" id="pimobilenumber" placeholder="Enter Mobile Number" required>
            <br>
            <input type="button" class="btn btn-info" id="getotpid" value="Get OTP">
            <br>
            <br>
            <label for="karyaotp">Enter OTP</label>
            <input type = "text" name = "karya_otp" id="karyaotp" hidden required/>
            <br>
            <br>
            <input type="submit" class="btn btn-primary" id="fetchaudioid" value="Fetch Audio"> <br>
          </form>
       



          
        </div> 
      {% endif %}

      <!-- <br><br><br><br> -->
      {% if  shareinfo['sharemode']|int >= 3 %}
        <div class="col-md-6 uploadkaryarecording pull-right">
          <h3><b>Upload Karya Recordings</b></h3>
          <form action="{{ url_for('karya_bp.fetch_karya_audio_zip') }}" method="POST" enctype="multipart/form-data">

          <!-- <h2>Fetch access code with metadata</h2>
              <a href="register_user.html">
                <button>Fetch access code</button>
              </a>
              -->
            <br>
              <p>Click on the "Choose File" button to upload a zip file*:<p>
              <input type="file" id="accesscodefile" name="accesscodefile">
              <br>
          
            <input class="btn btn-primary" id="submit" type="submit" value="Submit" >
          </form>
        </div>
      {% endif %}
    </div>
  </div>

  <!-- <br><br><br><br> -->
{% endblock %}
<!-- </body> -->

{% block scripts %}
{{super()}}
<script src="{{url_for('.static', filename='home_insert.js')}}"></script>
<script src="{{url_for('.static', filename='speaker_select2_dropdown.js')}}"></script>
<script src="{{url_for('.static', filename='fetchaccesscodelist.js')}}"></script>
<script type="text/javascript">fetchAccessCodeList({{ fetchaccesscodelist | tojson | safe }});</script>
<script type="text/javascript">fetchTransAccessCodeList({{ transcription_access_code_list | tojson | safe }});</script>
<script type="text/javascript">fetchVerAccessCodeList({{ verification_access_code_list | tojson | safe }});</script>
<script type="text/javascript">karyaSpeakerIdsList({{ karya_speaker_ids | tojson | safe }});</script>



<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>


<script>
$(document).ready(function() {
  $('#getotpid').click(function() {

    var dropdown = document.getElementById("optionSelect");
      var selectedValue = dropdown.value;
      var acode = null;

      if (selectedValue === "verificationAccessCode") {
        // Code for Verification Access Code selected
        var verAccessCodeSelect = document.getElementById("verification_access_code");
        acode = verAccessCodeSelect.value;
      } else if (selectedValue === "transcriptionAccessCode") {
        // Code for Transcription Access Code selected
        var transAccessCodeSelect = document.getElementById("transcription_access_code");
        acode = transAccessCodeSelect.value;
      }
  console.log(acode)
  //  var acode = document.getElementById("pimobilenumber").value;
    var mob = document.getElementById("pimobilenumber").value;

    $.getJSON("{{url_for('karya_bp.fetch_karya_otp')}}", {
      acode: String(acode),
      mob: String(mob)
    }, function(data) {
      document.getElementById("getotpid").hidden = true;
      document.getElementById("fetchaudioid").disabled = false;
      document.getElementById("karyaotp").hidden = false;
    });

    return false;
  });
});
</script> 



<script type="text/javascript">
  function showDropdown() {
    var option = document.getElementById("optionSelect").value;
    var verDropdown = document.getElementById("piveraccesscode");
    var transDropdown = document.getElementById("pitransaccesscode");
    
    if (option === "verificationAccessCode") {
      verDropdown.style.display = "block";
      transDropdown.style.display = "none";
    } else if (option === "transcriptionAccessCode") {
      verDropdown.style.display = "none";
      transDropdown.style.display = "block";
    } else {
      verDropdown.style.display = "none";
      transDropdown.style.display = "none";
    }
  }

  // Function to populate transcription access code dropdown
  function fetchTransAccessCodeList(accessCodeList) {
    var transAccessCodeSelect = document.getElementById("transAccessCodeSelect");
    transAccessCodeSelect.innerHTML = ""; // Clear existing options

    // Add options based on the accessCodeList
    for (var i = 0; i < accessCodeList.length; i++) {
      var option = document.createElement("option");
      option.value = accessCodeList[i].value;
      option.text = accessCodeList[i].text;
      transAccessCodeSelect.appendChild(option);
    }
  }

  // Function to populate verification access code dropdown
  function fetchVerAccessCodeList(accessCodeList) {
    var verAccessCodeSelect = document.getElementById("verAccessCodeSelect");
    verAccessCodeSelect.innerHTML = ""; // Clear existing options

    // Add options based on the accessCodeList
    for (var i = 0; i < accessCodeList.length; i++) {
      var option = document.createElement("option");
      option.value = accessCodeList[i].value;
      option.text = accessCodeList[i].text;
      verAccessCodeSelect.appendChild(option);
    }
  }
</script>








{% endblock %} 
